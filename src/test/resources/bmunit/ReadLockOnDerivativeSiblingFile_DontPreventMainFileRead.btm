RULE first openIntputStream
CLASS JoinableFileManager
METHOD openInputStream
AT ENTRY
IF incrementCounter($0) == 1
DO
    debug("<<<signalling second openInputStream");
    signalWake("first openInputStream", true);
    debug("<<<signalled second openInputStream");
ENDRULE

RULE second openInputStream
CLASS AbstractJointedIOTest$OpenInputStreamTask
METHOD <init>
AT ENTRY
BIND ops:OpenInputStreamTask = $this;
     content:String = ops.content;
IF content.equals("main")
DO
    debug(">>>wait for service enter first openInputStream");
    waitFor("first openInputStream");
    debug("<<<proceed with second openInputStream");
ENDRULE
