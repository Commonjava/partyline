RULE first openOutputStream
CLASS AbstractJointedIOTest$OpenOutputStreamTask
METHOD run
AT EXIT
BIND ops:OpenOutputStreamTask = $this;
     content:String = ops.content;
IF content.equals("first")
DO
    debug("<<<signalling second openOutputStream");
    signalWake("first openOutputStream", true);
    debug("<<<signalled second openOutputStream");
ENDRULE


RULE second openOutputStream
CLASS AbstractJointedIOTest$OpenOutputStreamTask
METHOD <init>
AT ENTRY
BIND ops:OpenOutputStreamTask = $this;
     content:String = ops.content;
IF content.equals("second")
DO
    debug(">>>wait for service enter first openOutputStream");
    waitFor("first openOutputStream");
    java.lang.Thread.sleep(5);
    debug("<<<proceed with second openOutputStream");
ENDRULE

